# R21-11 Explanation of Platform Design
## 変更点
* RESTが削除  
* IDSMの紹介が追加  
* SHMの紹介がPHMのチャプターで追加  
* Persistencyの章を修正  
* UCMとSMの関連について修正  
* EM,Diag,TSyncのマイナーアップデート  

## 3 Technical Scope and Approach
### 3.1 Overview - a landscape of intelligent ECUs
従来、ECUは主に、電気機械システムを置き換えたり増強したりする機能を実装しています。これらの深く組み込まれたECUのソフトウェアは、  
車両ネットワークに接続された他のECUからの入力信号と情報に基づいて電気出力信号を制御します。  
制御ソフトウェアの多くは、対象車両用に設計および実装されており、車両の寿命中に大幅に変更されることはありません。
高度に自動化された運転などのいくつかの車両機能は、非常に複雑でコンピューティングリソースを要求するソフトウェアを車両に導入し、厳格な整合性とセキュリティ要件を満たす必要があります。  
このようなソフトウェアは、環境認識や行動計画などの機能を実現し、車両を外部のバックエンドおよびインフラストラクチャシステムに統合します。  
車両のソフトウェアは、外部システムの進化や機能の向上により、車両のライフサイクル中に更新する必要があります。  
  
AUTOSAR Classic Platform（CP）規格は、深く組み込まれたECUのニーズに対応していますが、  
上記のECUのニーズを満たすことはできません。  
したがって、AUTOSARは、2番目のソフトウェアプラットフォームであるAUTOSAR Adaptive Platform（AP）を指定します。  
APは、主に高性能コンピューティングおよび通信メカニズムを提供し、柔軟なソフトウェア構成を提供します。  
無線でのソフトウェアアップデートをサポートします。電気信号や自動車固有のバスシステムへのアクセスなど、  
CP用に特別に定義された機能は、APに統合できますが、標準化の焦点にはなりません。  

> 自動運転などの複雑なソフトウェアを導入するためにリソースへの要求は高まり、外部との通信(OTAなど)  
> によってソフトウェアの更新をかける必要も出てきた。  
> 上記の文に書いてあるように、CPでは対応できない、高性能コンピューティングおよび通信メカニズムを提供し、  
> 柔軟なソフトウェア構成を提供するといった点がAPの役割。

### 3.2 Technology Drivers
背後にあるテクノロジードライバーの2つの主要なグループがあります。  
1つはイーサネットで、もう1つはプロセッサです。  

車載ネットワークのますます増大する帯域幅要件により、イーサネットが導入されました。  
イーサネットは、より高い帯域幅を提供し、ネットワークを切り替えて、長いメッセージのより効率的な転送、  
ポイントツーポイント通信などを可能にします。  
CANなどの従来の車載通信技術と比較して。 CPはイーサネットをサポートしていますが、  
主にレガシー通信テクノロジー向けに設計されており、そのために最適化されており、  
イーサネットベースの通信機能を十分に活用してメリットを得るのは困難です。  

> EthernetとはTCP/IPに対応した有線の規格のこと。
> LANケーブルはEthernet規格のケーブル。従来の車両通信で用いられていたプロトコルはCANやLINなど。
> CANやLINだと大容量データなどの通信には不向きな印象。
> 通信速度は10Mbps。
> CANは一回に送信できるデータは8バイト。通信速度は最大1Mbps。
> 以下サイトをみるとEthernetとは、なぜ車載に必要なのかがまとめられている。
> https://monoist.itmedia.co.jp/mn/articles/1905/13/news008.html

同様に、車両がさらにインテリジェントになるにつれて、  
プロセッサのパフォーマンス要件は近年非常に大きくなっています。  
マルチコアプロセッサはすでにCPで使用されていますが、処理能力のニーズにはマルチコア以上のものが必要です。  
数十から数百のコアを備えたメニーコアプロセッサ、GPGPU（GPUの汎用使用）、FPGA、および専用アクセラレータが登場しています。  
これらは、従来のMCUよりも桁違いに高いパフォーマンスを提供するためです。

> メニーコアはめちゃくちゃいっぱいプロセッサがあるCPUっていう大雑把な理解でOK
> https://wa3.i-3-i.info/word18085.html

コア数の増加は、マルチコアをサポートできますが、元々シングルコアMCU用に設計されたCPの設計を圧倒します。 
また、コンピューティング能力が高まるにつれ、データセンターでも電力効率がすでに問題になっています。  
実際、これらのインテリジェントECUにとってははるかに重要です。  
半導体およびプロセッサテクノロジの観点からは、ポラックの法則に制約されるため、  
プロセッサの周波数を際限なく上げることは物理的に不可能であり、パフォーマンスを拡張する唯一の方法は、  
複数（および多数）のコアを使用して並列に実行することです。  
また、ワットあたりの最高のパフォーマンスは、メニーコア、コプロセッサー、GPU、FPGA、  
アクセラレーターなどのさまざまなコンピューティングリソースを組み合わせることで達成されることが知られています。  
これはヘテロジニアスコンピューティングと呼ばれ、現在HPC（ハイパフォーマンスコンピューティング）で活用されていますが、  
CPの範囲をはるかに圧倒しています。

また、プロセッサとより高速な通信の両方の複合効果があることにも言及する価値があります。  
メニーコアプロセッサのように、より多くの処理要素が1つのチップに統合されるにつれて、  
これらの処理要素間の通信は、従来のECU間通信よりも桁違いに高速かつ効率的になります。  
これは、Network-on-Chip（NoC）などの新しいタイプのプロセッサ相互接続テクノロジによって可能になりました。  
より多くの処理能力とチップ内のより高速な通信のこのような複合効果はまた、  
増え続けるシステム要件を拡張できる新しいプラットフォームの必要性を促します。

### 3.3 Adaptive Platform - Characteristics

## 8 Communication Management
### 8.1 Overview
CMは、分散リアルタイム組み込み環境でのアプリケーション間の通信のすべての側面を担当します。  
背後にある概念は、アプリケーションソフトウェアの実装者がアプリケーションの特定の目的に集中できるように、実際のメカニズムから抽象化して通信パートナーを見つけて接続することです。  

### 8.2 Service Oriented Communication
サービスの概念は、基本的なオペレーティングソフトウェアによってすでに提供されている機能を超えてアプリケーションに提供される機能を意味します。  
CMソフトウェアは、マシン内通信およびマシン間通信のためにそのようなサービスを提供または利用するためのメカニズムを提供します。
サービスは以下の組み合わせで構成される。  
* Events  
* Methods  
* Fields 
通信パートナー間の通信パスは、設計時、起動時、または実行時に確立できます。  
このメカニズムの重要なコンポーネントは、ブローカリングインスタンスとして機能し、CommunicationManagementソフトウェアの一部でもあるサービスレジストリです。  
![](./img/スクリーンショット 2022-01-30 23.37.01.png)  
